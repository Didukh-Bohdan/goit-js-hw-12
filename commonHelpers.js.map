{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// const API_KEY = '42306432-61ab7fb6a7e28dda5f126fb86';\n\nimport axios from 'axios';\n\nconst apiKey = '42306432-61ab7fb6a7e28dda5f126fb86';\n\nexport async function searchImages(query, page = 1, perPage = 15) {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?key=${apiKey}&q=${query}&page=${page}&per_page=${perPage}`);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    }\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\n\nexport function renderGallery(images, isFirstLoad) {\n    loader.style.display = 'none';\n\n    if (images.length === 0) {\n        iziToast.info({\n            title: 'Info',\n            message: 'Sorry, there are no images matching your search query. Please try again!'\n        });\n        hideLoadMoreButton();\n        return;\n    }\n\n    if (isFirstLoad) {\n        showLoadMoreButton();\n    }\n\n    images.forEach(image => {\n        const card = document.createElement('div');\n        card.classList.add('card');\n        card.innerHTML = `\n            <a href=\"${image.largeImageURL}\" data-lightbox=\"gallery\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <p>Likes: ${image.likes}</p>\n            <p>Views: ${image.views}</p>\n            <p>Comments: ${image.comments}</p>\n            <p>Downloads: ${image.downloads}</p>\n        `;\n        gallery.appendChild(card);\n    });\n\n    lightbox.refresh();\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.style.display = 'block';\n}\n\nexport function showEndOfCollectionMessage() {\n    iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\"\n    });\n}\n","import { renderGallery, showLoadMoreButton, hideLoadMoreButton, showEndOfCollectionMessage } from './js/render-functions.js';\nimport { searchImages } from './js/pixabay-api.js';\n\nconst searchForm = document.getElementById('searchForm');\nconst searchInput = document.getElementById('searchInput');\nconst loader = document.getElementById('loader');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('loadMoreBtn');\n\nlet currentPage = 1;\nconst MAX_RESULTS_PER_PAGE = 15;\n\nsearchForm.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    const searchTerm = searchInput.value.trim();\n\n    if (searchTerm === '') {\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search term'\n        });\n        return;\n    }\n\n    loader.style.display = 'block';\n    gallery.innerHTML = '';\n\n    try {\n        currentPage = 1; \n        await performSearchAndRender(searchTerm, currentPage);\n    } catch (error) {\n        loader.style.display = 'none';\n        console.error('Error fetching data:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching data. Please try again.'\n        });\n    }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    try {\n        const searchTerm = searchInput.value.trim();\n        await performSearchAndRender(searchTerm, currentPage);\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while fetching more data. Please try again.'\n        });\n    }\n});\n\nasync function performSearchAndRender(query, page) {\n    try {\n        const data = await searchImages(query, page, MAX_RESULTS_PER_PAGE);\n\n        const isEndOfCollection = data.totalHits <= page * MAX_RESULTS_PER_PAGE;\n\n        renderGallery(data.hits, page === 1);\n\n        if (data.hits.length === 0 || isEndOfCollection) {\n            hideLoadMoreButton();\n            if (isEndOfCollection) {\n                showEndOfCollectionMessage();\n            }\n        } else {\n            showLoadMoreButton();\n            currentPage++;\n        }\n    } catch (error) {\n        console.error('Error fetching data:', error);\n        throw error;\n    } finally {\n        loader.style.display = 'none';\n    }\n}\n"],"names":["apiKey","searchImages","query","page","perPage","axios","error","loader","gallery","lightbox","SimpleLightbox","loadMoreBtn","renderGallery","images","isFirstLoad","iziToast","hideLoadMoreButton","showLoadMoreButton","image","card","showEndOfCollectionMessage","searchForm","searchInput","currentPage","MAX_RESULTS_PER_PAGE","e","searchTerm","performSearchAndRender","data","isEndOfCollection"],"mappings":"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"}